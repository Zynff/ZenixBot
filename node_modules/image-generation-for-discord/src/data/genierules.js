const { createCanvas, loadImage } = require('canvas');

async function genierules(text) {
    if (!text) throw new Error(`Please provide a message.`)

    const base = await loadImage(`https://raw.githubusercontent.com/caseyCantCode/discordImageGenImages/main/genie-rules.png`)

    const canvas = createCanvas(base.width, base.height)

    const ctx = canvas.getContext('2d')

    ctx.drawImage(base, 0, 0)

    ctx.font = `52px Arial`
    ctx.fillStyle = '#000000'
    ctx.textAlign = 'center'
    let fontSize = 25;

    while (ctx.measureText(text).width > 140) {
        fontSize--
        ctx.font(`${fontSize}px Arial`)
    }
    ctx.fillText(text, 140, 650)
    return canvas.toBuffer()
}
module.exports = genierules