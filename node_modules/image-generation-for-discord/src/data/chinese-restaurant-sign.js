const { createCanvas, loadImage } = require('canvas');
const { wrapText } = require('../functions/canvas')

async function chineserestaurantsign(text) {
    if (!text) throw new Error(`Please provide some text.`)

    const base = await loadImage(`https://raw.githubusercontent.com/caseyCantCode/discordImageGenImages/main/chinese-restaurant.png`);
    const canvas = createCanvas(base.width, base.height);
    const ctx = canvas.getContext('2d');
    ctx.drawImage(base, 0, 0);
    ctx.fillStyle = '#1f1f1f';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.font = `28px Arial`
    const lines = await wrapText(ctx, text.toUpperCase(), 340);
    if (lines.length === 1) {
        ctx.fillText(lines[0], base.width / 2, 288);
    } else if (lines.length === 2) {
        ctx.fillText(lines[0], base.width / 2, 288);
        ctx.fillText(lines[1], base.width / 2, 315);
    } else if (lines.length === 3) {
        ctx.fillText(lines[0], base.width / 2, 261);
        ctx.fillText(lines[1], base.width / 2, 288);
        ctx.fillText(lines[2], base.width / 2, 315);
    } else {
        ctx.fillText(lines[0], base.width / 2, 261);
        ctx.fillText(lines[1], base.width / 2, 288);
        ctx.fillText(lines[2], base.width / 2, 315);
        ctx.fillText(lines[3], base.width / 2, 342);
    }
    return canvas.toBuffer()
}
module.exports = chineserestaurantsign