const request = require('node-superfetch')
const Canvas = require('canvas')
let { loadImage } = require("canvas")

async function gay(baseAvatarURL) {
    if (!baseAvatarURL) throw new Error(`Please provide a image url.`)

    const overlayAvatarURL = "https://raw.githubusercontent.com/caseyCantCode/discordImageGenImages/main/gay.png"

    const baseAvatarData = await request.get(baseAvatarURL);
    const baseAvatar = await loadImage(baseAvatarData.body);
    const overlayAvatarData = await request.get(overlayAvatarURL);
    const overlayAvatar = await loadImage(overlayAvatarData.body);
    const canvas = Canvas.createCanvas(baseAvatar.width, baseAvatar.height);
    const ctx = canvas.getContext('2d');
    ctx.globalAlpha = 0.7;
    ctx.drawImage(baseAvatar, 0, 0);
    ctx.drawImage(overlayAvatar, 0, 0, baseAvatar.width, baseAvatar.height);
    return canvas.toBuffer()
}
module.exports = gay